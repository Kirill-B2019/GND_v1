# Документация по смарт-контрактам блокчейна «ГАНИМЕД»

> **Проект:** Блокчейн «ГАНИМЕД»  
> **Язык смарт-контрактов:** Solidity  
> **Внутренняя валюта:** GND  
> **Стандарты токенов:** ERC-20, TRC-20, кастомные (расширяемый интерфейс)

---

## Оглавление

- [Общее описание](#общее-описание)
- [Стандарты и интерфейсы токенов](#стандарты-и-интерфейсы-токенов)
    - [ERC-20](#erc-20)
    - [TRC-20](#trc-20)
    - [SimpleGNDToken (кастомный стандарт)](#simplegndtoken-кастомный-стандарт)
    - [ISimpleGNDToken (интерфейс)](#isimplegndtoken-интерфейс)
- [Контракт оракула](#контракт-оракула)
- [Структура папки contracts/](#структура-папки-contracts)
- [Требования к интеграции и безопасности](#требования-к-интеграции-и-безопасности)
- [Примеры использования](#примеры-использования)

---

## Общее описание

Блокчейн «ГАНИМЕД» поддерживает смарт-контракты на языке Solidity, включая:
- **ERC-20** - стандарт токенов Ethereum;
- **TRC-20** - стандарт токенов Tron;
- **Кастомные стандарты** - расширяемые токены с пользовательской бизнес-логикой.

Все операции (деплой, вызовы, комиссии) осуществляются через внутреннюю валюту GND.  
Система поддерживает гибкую настройку комиссий и динамическое переключение стандартов токенов.

---

## Стандарты и интерфейсы токенов

### ERC-20

**Реализация:** `contracts/erc20/ERC20.sol`  
**Описание:**  
Стандартный токен для совместимости с экосистемой Ethereum.  
Включает функции: `totalSupply`, `balanceOf`, `transfer`, `approve`, `transferFrom`, `allowance`, события `Transfer` и `Approval`.

---

### TRC-20

**Реализация:** `contracts/trc20/TRC20.sol`  
**Описание:**  
Аналог ERC-20 для интеграции с Tron и совместимыми системами.  
Интерфейс идентичен ERC-20, но может включать дополнительные поля для Tron.

---

### SimpleGNDToken (кастомный стандарт)

**Реализация:** `contracts/gndtoken/SimpleGNDToken.sol`  
**Описание:**  
Расширяемый токен, поддерживающий стандартные методы ERC-20/TRC-20 и дополнительные функции, необходимые для кастомных сценариев:

- Минтинг (выпуск новых токенов)
- Сжигание токенов (burn)
- Массовая раздача (airdrop)
- Интеграция с оракулами (внешние данные)
- Получение метаданных токена

**Основные методы:**
- `totalSupply()`, `balanceOf(address)`
- `transfer(address,uint256)`, `approve(address,uint256)`, `transferFrom(address,address,uint256)`
- `mint(address,uint256)`, `burn(uint256)`, `burnFrom(address,uint256)`
- `getMetadata()`
- `airdrop(address[],uint256)`
- `submitOracleData(string)`

**Пример:**
SimpleGNDToken token = new SimpleGNDToken(1000000);
token.mint(user, 1000);
token.burn(500);
token.airdrop([addr1, addr2], 100);


---

### ISimpleGNDToken (интерфейс)

**Реализация:** `contracts/interfaces/ISimpleGNDToken.sol`  
**Описание:**  
Универсальный интерфейс для токенов стандарта SimpleGNDToken.  
Позволяет реализовывать как стандартные, так и кастомные методы, обеспечивая совместимость и расширяемость.

**Методы интерфейса:**
- Стандартные: `totalSupply`, `balanceOf`, `transfer`, `approve`, `transferFrom`, `allowance`
- Расширенные: `mint`, `burn`, `burnFrom`, `getMetadata`, `airdrop`, `submitOracleData`
- События: `Transfer`, `Approval`, `OracleData`

---

## Контракт оракула

**Реализация:** `contracts/gndtoken/OracleExample.sol`  
**Описание:**  
Контракт для интеграции внешних данных (оракулов) с поддержкой мультисиг-подтверждения.  
Используется для записи и верификации внешних событий, цен и других данных, необходимых для работы смарт-контрактов.

**Ключевые функции:**
- `proposeData(string)` - создание заявки на запись данных
- `confirmData(uint256)` - подтверждение заявки оракулом
- `getRequest(uint256)` - получение информации о заявке
- `getRequestsCount()` - количество заявок

**Особенности:**
- Только доверенные оракулы могут подтверждать данные
- Мультисиг: данные считаются подтверждёнными после достижения минимального числа голосов

---

## Структура папки contracts/

contracts/
- ├── erc20/ # Стандартные контракты ERC-20
- ├── trc20/ # Стандартные контракты TRC-20
- ├── gndtoken/ # Кастомные токены и примеры оракулов
- │ ├── SimpleGNDToken.sol
- │ └── OracleExample.sol
- ├── templates/ # Шаблоны для генерации контрактов
- ├── interfaces/ # Интерфейсы (ERC-20, TRC-20, SimpleGNDToken)
- │ └── ISimpleGNDToken.sol
- ├── utils/ # Вспомогательные библиотеки (Ownable, SafeMath)
- ├── storage/ # Контракты для работы с метаданными
- ├── migration/ # Скрипты деплоя и миграций
- ├── tests/ # Юнит-тесты для контрактов
- └── README.md # Документация


---

## Требования к интеграции и безопасности

- **Комиссии:** Все операции оплачиваются в GND, с гибкой настройкой gas fees.
- **Адреса:** Используются стандарты Base58, hex (совместимость с Ethereum и Tron).
- **Безопасность:** Поддержка мультисиг, аудит кода, контроль доступа к API.
- **Оракулы:** Интеграция через мультисиг-контракты, поддержка различных типов оракулов.
- **Мосты и хранилища:** Возможность интеграции с внешними блокчейнами и децентрализованными хранилищами (например, IPFS).

---

## Примеры использования

### Деплой токена SimpleGNDToken

// Деплой контракта с начальными токенами
SimpleGNDToken token = new SimpleGNDToken(1000000);

// Минтинг токенов
token.mint(0x123..., 1000);

// Сжигание токенов
token.burn(500);

// Массовая раздача (airdrop)
address[] memory users = new address;
users = 0xabc...;
users = 0xdef...;
token.airdrop(users, 100);

// Получение метаданных
(string memory name, string memory symbol, uint8 decimals, uint256 supply) = token.getMetadata();


### Использование оракула

// Предложить новые данные
uint256 reqId = oracle.proposeData("BTC/USD: 65000");

// Подтвердить заявку оракулом
oracle.confirmData(reqId);

// Получить данные по заявке
(string memory data, uint256 confirmations, bool executed) = oracle.getRequest(reqId);

---

## Дополнительная информация

- **Тестирование:** Все контракты покрыты юнит-тестами (`contracts/tests/`).
- **Расширяемость:** Легко добавлять новые стандарты токенов и бизнес-логику через интерфейсы.
---