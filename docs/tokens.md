# Токены в блокчейне «ГАНИМЕД»

## Общие положения

Блокчейн «ГАНИМЕД» поддерживает работу с токенами стандартов ERC-20, TRC-20 и кастомными стандартами. Все операции с токенами осуществляются через смарт-контракты на языке Solidity с оплатой комиссий в GND. Система построена на универсальном интерфейсе токенов, что обеспечивает гибкость и расширяемость.

---

## 1. Поддерживаемые стандарты токенов

### 1.1. ERC-20

- Полная совместимость с экосистемой Ethereum.
- Поддержка стандартных методов: `totalSupply`, `balanceOf`, `transfer`, `approve`, `transferFrom`, `allowance`.
- Интеграция с кошельками и биржами, использующими стандарт ERC-20.

### 1.2. TRC-20

- Аналогичный стандарт для интеграции с Tron и другими сетями.
- Методы и структура идентичны ERC-20.

### 1.3. Кастомные стандарты

- Возможность создания собственных токенов с уникальной бизнес-логикой и интерфейсом.
- Метаданные контракта содержат описание стандарта (`"standard": "custom"`) и необходимые параметры.

---

## 2. Универсальный интерфейс токенов

- Все токены реализуют единый интерфейс, позволяющий добавлять новые стандарты без изменений основного кода блокчейна.
- В метаданных контракта указывается стандарт: `"erc20"`, `"trc20"` или `"custom"`.
- Контракты могут одновременно поддерживать несколько стандартов.

**Пример метаданных токена:**
{
"standard": "erc20",
"name": "MyToken",
"symbol": "MTK",
"decimals": 18
}

text

---

## 3. Работа с токенами через API

### 3.1. Деплой токена

**REST:**
POST /contract/deploy
Content-Type: application/json

text
**Тело запроса:**
{
"from": "GND1...",
"bytecode": "<hex>",
"gasLimit": 2000000,
"gasPrice": 1,
"nonce": 7,
"metadata": {
"standard": "erc20",
"name": "MyToken",
"symbol": "MTK",
"decimals": 18
},
"signature": "..."
}

text
**Ответ:**
{
"contractAddress": "GNDct1..."
}

text

### 3.2. Вызов метода токена

**REST:**
POST /contract/call
Content-Type: application/json

text
**Тело запроса:**
{
"from": "GND1...",
"to": "GNDct1...",
"data": "<hex>",
"gasLimit": 80000,
"gasPrice": 1,
"nonce": 8,
"signature": "..."
}

text
**Ответ:**
{
"result": "...",
"gasUsed": 50000
}

text

### 3.3. Получить информацию о токене

**JSON-RPC:**
{
"jsonrpc": "2.0",
"method": "token_getInfo",
"params": { "address": "GNDct1..." },
"id": 1
}

text
**Ответ:**
{
"jsonrpc": "2.0",
"result": {
"standard": "erc20",
"name": "MyToken",
"symbol": "MTK",
"decimals": 18,
"totalSupply": "1000000"
},
"id": 1
}

text

---

## 4. Примеры использования

### 4.1. Деплой ERC-20 токена

1. Скомпилируйте контракт на Solidity.
2. Отправьте байткод и метаданные через `/contract/deploy`.
3. Получите адрес токена и используйте его для операций transfer, approve и др.

### 4.2. Деплой кастомного токена

1. Определите собственные методы и события в контракте.
2. Укажите `"standard": "custom"` в метаданных.
3. После деплоя используйте методы согласно вашей бизнес-логике.

---

## 5. Комиссии и привязка токенов

- Все операции (деплой, трансфер, взаимодействие с контрактом) оплачиваются в GND.
- Гибкая настройка комиссий (gas fees) в зависимости от сложности операции.
- Возможна привязка токенов к GND для обмена или управления средствами (например, через мосты или специальные контракты).

---

## 6. Безопасность и валидация

- Перед деплоем обязательна цифровая подпись владельца.
- Контракт проходит валидацию на соответствие стандарту.
- Все вызовы функций токенов проходят через VM с контролем газа и sandbox-изоляцией.

---

## 7. Расширение стандартов

- Для добавления нового стандарта реализуйте интерфейс токена в модуле tokens/.
- Зарегистрируйте стандарт через метаданные.
- Контракты могут поддерживать сразу несколько стандартов (например, ERC-20 + custom).

---

## 8. Тестирование и аудит

- Для всех токенов реализуются юнит- и интеграционные тесты.
- Проводится аудит безопасности, особенно для кастомных стандартов и валидации байткода.

---

## 9. Ссылки

- [api.md](api.md) - описание API для работы с токенами
- [contracts.md](contracts.md) - описание работы со смарт-контрактами
- [architecture.md](architecture.md) - архитектура блокчейна
- [consensus.md](consensus.md) - алгоритмы консенсуса
- [contracts.md](contracts.md) - работа со смарт-контрактами
- [integration.md](integration.md) - интеграция с GND
---